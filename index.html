<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Art Gallery â€¢ imc</title>
  <style>
    :root{
      --purple:#5d00ff; /* vivid purple */
      --purple-2:#7d52ff; /* soft purple */
      --cream:#ffffff; /* cream */
      --white:#ffffff;
      --ink:#ffffff;
      --muted:#c8d1e3;
      --card:#ffffffcc;
      --shadow: 0 10px 30px rgba(124,58,237,.22);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: "Poppins", ui-sans-serif, system-ui, -apple-system, "Noto Sans Thai", "Segoe UI", Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--ink); background:radial-gradient(1200px 800px at 10% -10%, #f0e9ff 0%, #ffffff 40%),
               radial-gradient(1000px 700px at 110% 10%, #fff2d6 0%, #ffffff 60%),
               linear-gradient(120deg, #ffffff, #ffffff);
      overflow-x:hidden;
    }
    /* Animated gradient veil */
    .bg-veil{
      position:fixed; inset:0; pointer-events:none; z-index:-1;
      background: conic-gradient(from 45deg at 50% 50%, #ffffff00 0 20%, #a78bfa22 20% 40%, #ffffff00 40% 60%, #f7e7c622 60% 80%, #ffffff00 80% 100%);
      animation: spin 18s linear infinite;
      filter: blur(40px) saturate(120%);
    }
    @keyframes spin{to{transform:rotate(1turn)}}

    /* Floating blobs background shapes */
    .blob{ position:fixed; z-index:0; filter: blur(40px); opacity:.35; pointer-events:none; }
    .b1{ width:300px; height:300px; background:#c4b5fd; left:-80px; top:120px; border-radius:50%; animation: blob 14s infinite ease-in-out; }
    .b2{ width:420px; height:420px; background:#fde4b4; right:-120px; top:40px; border-radius:50%; animation: blob 18s infinite ease-in-out reverse; }
    .b3{ width:260px; height:260px; background:#a78bfa; right:14%; bottom:10%; border-radius:50%; animation: blob 16s infinite ease-in-out; }
    @keyframes blob{ 0%,100%{transform:translate(0,0)} 50%{ transform: translate(20px, -30px) scale(1.05) } }

    /* Sparkle layer for typing effects */
    .sparkle-layer{ position:fixed; inset:0; pointer-events:none; z-index:2; overflow:hidden; }
    .sparkle{ position:absolute; font-size:14px; opacity:0; transform: translate(-50%, -50%) scale(.6);
      animation: floatUp .9s ease-out forwards; }
    @keyframes floatUp{ 0%{opacity:0; transform:translate(-50%, 10px) scale(.6)} 40%{opacity:1} 100%{opacity:0; transform:translate(-50%, -30px) scale(1)} }

    header{ max-width:1200px; margin:28px auto 12px; padding:0 18px; position:relative; z-index:1; }
    .title{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
    .logo{ width:48px; height:48px; border-radius:16px; background:linear-gradient(135deg, var(--purple), var(--purple-2)); box-shadow: var(--shadow); position:relative; overflow:hidden; }
    .logo:before{content:""; position:absolute; inset:-40%; background:radial-gradient(circle at 30% 30%, #ffffff88 0 30%, #ffffff00 32%); animation: floatLogo 5s ease-in-out infinite; }
    @keyframes floatLogo{ 50%{ transform: translateY(-6px) rotate(8deg);} }
    h1{ font-size: clamp(22px, 4vw, 36px); margin:0; line-height:1.15; font-weight:800; background: linear-gradient(90deg, var(--purple), #9a5ef1, #c084fc); -webkit-background-clip: text; background-clip:text; color:transparent; text-shadow: 0 1px 0 #ffffff80; }
    .subtitle{ color:var(--muted); margin-top:4px; font-weight:500 }

    /* Search Bar */
    .search-wrap{ margin-top:16px; display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
    .search{ position:relative; flex:1 1 520px; max-width:780px; }
    .search input{ width:100%; padding:16px 52px 16px 18px; border-radius: 999px; border:2px solid #ede9fe; background:#fbfaff; outline:none; font-size:16px; transition: box-shadow .25s, transform .2s, border-color .3s, background .3s; box-shadow: 0 10px 30px #ede9fe; }
    .search input:focus{ box-shadow: 0 12px 40px #e9d5ff; border-color:#d8b4fe; transform: translateY(-1px); background: #ffffff; }
    .search .icon{ position:absolute; right:10px; top:50%; transform:translateY(-50%); display:grid; place-items:center; width:36px; height:36px; border-radius:999px; background:linear-gradient(135deg, var(--purple), var(--purple-2)); color:white; font-weight:700; box-shadow: var(--shadow); cursor:pointer; transition: transform .15s ease; }
    .search .icon:active{ transform: translateY(-48%) scale(.96); }
    .btn{ padding:10px 14px; border-radius:999px; border:0; background:linear-gradient(135deg, var(--purple), var(--purple-2)); color:white; font-weight:700; box-shadow: var(--shadow); cursor:pointer; transition: transform .15s; }
    .btn:active{ transform: translateY(1px) }

    /* typing pulse */
    @keyframes typingPulse{0%{box-shadow:0 0 0 0 #c4b5fd77}70%{box-shadow:0 0 0 8px transparent}100%{box-shadow:0 0 0 0 transparent}}
    .typing{ animation: typingPulse .6s }

    main{ max-width:1200px; margin: 8px auto 90px; padding: 0 18px; position:relative; z-index:1; }
    .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(230px, 1fr)); gap:18px; }
    .card{ position:relative; border-radius: var(--radius); overflow:hidden; background: var(--card); backdrop-filter: blur(6px); box-shadow: var(--shadow); transform: translateY(6px) scale(.98); opacity:0; animation: popIn .6s cubic-bezier(.2,.7,.2,1) forwards; }
    @keyframes popIn{ to{transform:none; opacity:1} }
    .imgwrap{ position:relative; aspect-ratio: 4/3; overflow:hidden; }
    .imgwrap img{ width:100%; height:100%; object-fit:cover; display:block; transition: transform .7s cubic-bezier(.2,.8,.2,1); }
    .shine{ position:absolute; inset:0; background: linear-gradient(115deg, #ffffff00 20%, #ffffff44 50%, #ffffff00 80%); transform: translateX(-120%); transition: transform .9s ease; }
    .card:hover .imgwrap img{ transform: scale(1.08) rotate(.3deg); }
    .card:hover .shine{ transform: translateX(120%); }
    .meta{ padding:14px 14px 16px; }
    .titleRow{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .titleRow h3{ margin:0; font-size:16px; font-weight:800; color:#402a68 }
    .badge{ font-size:11px; padding:6px 10px; border-radius:999px; color:white; background:linear-gradient(135deg, var(--purple), var(--purple-2)); box-shadow: var(--shadow); }
    .desc{ font-size:13px; color:#5b5566; margin-top:6px; line-height:1.5 }
    .time{ display:flex; align-items:center; gap:6px; font-size:12px; color:#7e7791; margin-top:10px }

    .empty{ text-align:center; padding:40px 10px; color:#8b5cf6; font-weight:600; animation: puff .6s ease; }
    @keyframes puff{ from{transform:scale(.96); opacity:.5} to{transform:scale(1); opacity:1} }

    /* Modal viewer */
    .modal{ position:fixed; inset:0; display:none; place-items:center; z-index:50; }
    .modal.show{ display:grid; }
    .m-overlay{ position:absolute; inset:0; background:#0b0220cc; backdrop-filter: blur(10px); animation: fade .25s ease }
    @keyframes fade{ from{opacity:0} to{opacity:1} }
    .m-card{ position:relative; width:min(94vw, 1000px); max-height:90vh; background:var(--card); border-radius:24px; overflow:hidden; box-shadow: var(--shadow); animation: lift .25s ease forwards; transform: translateY(12px) scale(.96); }
    @keyframes lift{ to{ transform: translateY(0) scale(1) } }
    .m-img{ width:100%; max-height:64vh; object-fit:contain; display:block; background:#00000020 }
    .m-meta{ padding:14px 16px 18px }
    .m-title{ margin:0; font-size:20px; background: linear-gradient(90deg, var(--purple), var(--purple-2)); -webkit-background-clip:text; color:transparent; }
    .m-time{ color:#6b5a85; font-size:13px; margin-top:6px }
    .m-desc{ color:#5b5566; font-size:14px; line-height:1.6 }

    .m-btn{ position:absolute; top:50%; transform: translateY(-50%); border:0; width:44px; height:44px; border-radius:999px; display:grid; place-items:center; background:linear-gradient(135deg, var(--purple), var(--purple-2)); color:#fff; box-shadow: var(--shadow); cursor:pointer; transition: transform .15s, filter .2s }
    .m-btn:active{ transform: translateY(-50%) scale(.92) }
    .m-prev{ left:8px }
    .m-next{ right:8px }
    .m-close{ position:absolute; right:10px; top:10px; transform:none; width:40px; height:40px }

    @media (max-width: 768px){
      .m-btn{ width:36px; height:36px }
      .m-close{ width:34px; height:34px; right:6px; top:6px }
    }
  </style>
</head>
<body>
  <div class="bg-veil"></div>
  <div class="blob b1"></div>
  <div class="blob b2"></div>
  <div class="blob b3"></div>
  <div class="sparkle-layer" id="sparkles"></div>

  <header>
    <div class="title">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>GALLERY â€¢ <span style="font-weight:900">IMC72S</span> âœ¨</h1>
        <div class="subtitle">HELLO! <b>WELCOME</b> TO <b>MY </b>ART GALLERY <b>MADE BY IMC72S</b> â€“ PLS FOLLOW ME ON INSTAGRAM AND TIKTOK!</div>
      </div>
    </div>

    <div class="search-wrap">
      <div class="search">
        <input id="q" type="text" placeholder="Search imagesâ€¦" autocomplete="off" />
        <div class="icon tip" id="searchBtn" title="Search">ðŸ”Ž</div>
      </div>
      <button id="clearBtn" class="btn" title="Reset Search">ResetSearch</button>
    </div>
  </header>

  <main>
    <div id="gallery" class="grid" aria-live="polite"></div>
    <div id="empty" class="empty hide">Nothing here.<br/>No results. Try other keywords!</div>
  </main>

  <template id="cardTmpl">
    <article class="card tilt" role="button" tabindex="0">
      <div class="imgwrap">
        <img alt="" loading="lazy" />
        <div class="shine"></div>
      </div>
      <div class="meta">
        <div class="titleRow">
          <h3 class="t"></h3>
          <span class="badge">IMC</span>
        </div>
        <div class="desc d"></div>
        <div class="time clock"></div>
      </div>
    </article>
  </template>

  <div id="modal" class="modal" aria-hidden="true">
    <div class="m-overlay" id="mOverlay"></div>
    <div class="m-card" role="dialog" aria-modal="true">
      <button class="m-btn m-prev" id="mPrev" aria-label="Previous">â—€</button>
      <img class="m-img" id="mImg" alt="" />
      <button class="m-btn m-next" id="mNext" aria-label="Next">â–¶</button>
      <button class="m-btn m-close" id="mClose" aria-label="Close">âœ–</button>
      <div class="m-meta">
        <h2 class="m-title" id="mTitle"></h2>
        <div class="m-time" id="mTime"></div>
        <p class="m-desc" id="mDesc"></p>
      </div>
    </div>
  </div>

  <script>
    // --- Mini Store ---
    const state = { items: [], query: '', idx: 0 };

    /**
     * Add a picture into the gallery.
     * @param {string} src image url
     * @param {string} title title text
     * @param {string} description description text
     * @param {string} time any time text, e.g. "2025-08-24 18:00" or "à¹€à¸¡à¸·à¹ˆà¸­à¸§à¸²à¸™ 21:00"
     * @param {boolean} hideTime set true to hide time row
     */
    function up(src, title, description, time, hideTime=false){
      const id = crypto.randomUUID ? crypto.randomUUID() : (Date.now()+Math.random()).toString(36);
      state.items.push({ id, src, title, description, time, hideTime, createdAt: Date.now() });
      render();
    }
    window.up = up; // expose to global

    // --- DOM refs ---
    const g = document.getElementById('gallery');
    const empty = document.getElementById('empty');
    const qInput = document.getElementById('q');
    const spark = document.getElementById('sparkles');
    const searchBtn = document.getElementById('searchBtn');
    const clearBtn = document.getElementById('clearBtn');

    // --- Render ---
    function render(){
      const q = state.query.trim().toLowerCase();
      const filtered = !q ? state.items : state.items.filter(it => (it.title+" "+it.description+" "+(it.time||"")).toLowerCase().includes(q));
      g.innerHTML = '';
      empty.classList.toggle('hide', filtered.length !== 0);
      filtered.forEach((it, i) => {
        const node = buildCard(it, i, filtered);
        node.style.animationDelay = (i * 0.04)+'s';
        g.appendChild(node);
      });
    }

    function buildCard(it, i, arr){
      const t = document.getElementById('cardTmpl');
      const el = t.content.firstElementChild.cloneNode(true);
      const img = el.querySelector('img');
      const title = el.querySelector('.t');
      const desc = el.querySelector('.d');
      const clock = el.querySelector('.clock');

      img.src = it.src; img.alt = it.title || 'image';
      title.textContent = it.title || 'â€”';
      desc.textContent = it.description || '';
      if(!it.hideTime && it.time){ clock.innerHTML = `ðŸ•’ <span>${escapeHtml(it.time)}</span>`; } else { clock.remove(); }

      el.addEventListener('click', ()=> openModalById(it.id));
      el.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter') openModalById(it.id) });
      return el;
    }

    function escapeHtml(str=''){ return str.replace(/[&<>\"]/g, s=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;"}[s])); }

    // --- Typing Effects ---
    function burst(x, y, ch){
      const e = document.createElement('div'); e.className = 'sparkle'; e.textContent = ch || ['âœ¨','ðŸ’œ','ðŸŒ¸','â­','ðŸ¤','ðŸ«§'][Math.floor(Math.random()*6)]; e.style.left = x + 'px'; e.style.top = y + 'px'; spark.appendChild(e); e.addEventListener('animationend', ()=> e.remove());
    }

    function pointerNearRight(el){ const r = el.getBoundingClientRect(); return { x: r.right - 32 + Math.random()*16, y: r.top + r.height/2 + (Math.random()*12-6) }; }

    qInput.addEventListener('input', (ev)=>{
      qInput.classList.remove('typing'); void qInput.offsetWidth; qInput.classList.add('typing');
      state.query = qInput.value; render();
      const p = pointerNearRight(qInput); burst(p.x, p.y, ev.data === null ? 'ðŸ’¨' : undefined);
    });

    searchBtn.addEventListener('click', ()=>{ qInput.focus(); qInput.dispatchEvent(new Event('input')); const r = searchBtn.getBoundingClientRect(); burst(r.left+18, r.top+18, 'ðŸ”'); });
    clearBtn.addEventListener('click', ()=>{ qInput.value=''; qInput.dispatchEvent(new Event('input')); });

    // --- Modal Logic ---
    const modal = document.getElementById('modal');
    const mOverlay = document.getElementById('mOverlay');
    const mImg = document.getElementById('mImg');
    const mTitle = document.getElementById('mTitle');
    const mDesc = document.getElementById('mDesc');
    const mTime = document.getElementById('mTime');
    const mPrev = document.getElementById('mPrev');
    const mNext = document.getElementById('mNext');
    const mClose = document.getElementById('mClose');

    function openModalById(id){
      const idx = state.items.findIndex(x=>x.id===id);
      if(idx<0) return; state.idx = idx; openModal();
    }
    function openModal(){
      const it = state.items[state.idx]; if(!it) return;
      modal.classList.add('show');
      mImg.src = it.src; mImg.alt = it.title||''; mTitle.textContent = it.title||''; mDesc.textContent = it.description||''; mTime.textContent = it.hideTime? '' : (it.time||'');
    }
    function closeModal(){ modal.classList.remove('show'); }
    function nav(step){
      if(!state.items.length) return; state.idx = (state.idx + step + state.items.length) % state.items.length; openModal();
    }

    mOverlay.addEventListener('click', closeModal); mClose.addEventListener('click', closeModal);
    mPrev.addEventListener('click', ()=>nav(-1)); mNext.addEventListener('click', ()=>nav(1));
    window.addEventListener('keydown', (e)=>{ if(!modal.classList.contains('show')) return; if(e.key==='Escape') closeModal(); if(e.key==='ArrowLeft') nav(-1); if(e.key==='ArrowRight') nav(1); });

    // --- Demo (remove if not needed) ---
    up("https://i.ibb.co/Ngw4rgrv/105-20250824103128.png","Test","hello!","26/2025 7:52", false);
    
  </script>
</body>
</html>
